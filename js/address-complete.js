// Generated by CoffeeScript 1.6.3
(function() {
  var ac;

  ac = angular.module('fa-address-complete', []);

  ac.directive('faAddressComplete', function() {
    return {
      restrict: 'A',
      scope: {
        fields: '=faFields',
        options: '=faOptions',
        onPopulate: '&faOnPopulate'
      },
      link: function(scope, element) {
        var control;
        control = new pca.Address(scope.fields, scope.options);
        return control.listen("populate", function(address) {
          var field, id, mode, _i, _len, _ref;
          _ref = scope.fields;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            field = _ref[_i];
            mode = field.mode;
            if (mode === pca.fieldMode.POPULATE || mode === pca.fieldMode.DEFAULT) {
              id = field.element;
              $("#" + id).trigger('change');
            }
          }
          return typeof scope.onPopulate === "function" ? scope.onPopulate({
            address: address
          }) : void 0;
        });
      }
    };
  });

}).call(this);
